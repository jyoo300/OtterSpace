{"ast":null,"code":"import _slicedToArray from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Button from\"react-bootstrap/Button\";import Spinner from\"react-bootstrap/Spinner\";import Badge from\"react-bootstrap/Badge\";import{useAuth}from\"./../util/auth.js\";import\"./AuthSocial.scss\";function AuthSocial(props){var auth=useAuth();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),lastUsed=_useState4[0],setLastUsed=_useState4[1];var providerDisplayNames={google:\"Google\",facebook:\"Facebook\",twitter:\"Twitter\",github:\"GitHub\"};var onSigninWithProvider=function onSigninWithProvider(provider){console.log('lol');setPending(provider);auth.signinWithProvider(provider).then(function(user){localStorage.setItem(\"lastUsedAuthProvider\",provider);props.onAuth(user);}).catch(function(error){props.onError(error.message);}).finally(function(){setPending(null);});};// Get value of last used auth provider\nuseEffect(function(){if(props.showLastUsed){var _lastUsed=window.localStorage.getItem(\"lastUsedAuthProvider\");if(_lastUsed){setLastUsed(_lastUsed);}}},[props.showLastUsed]);return/*#__PURE__*/React.createElement(React.Fragment,null,props.providers.map(function(provider){return/*#__PURE__*/React.createElement(Button,{variant:\"light\",size:props.inputSize,block:true,onClick:function onClick(){onSigninWithProvider(provider);},className:\"position-relative\",key:provider},/*#__PURE__*/React.createElement(\"div\",{className:\"AuthSocial__icon\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://uploads.divjoy.com/icon-\".concat(provider,\".svg\"),alt:providerDisplayNames[provider]})),pending!==provider&&/*#__PURE__*/React.createElement(\"span\",null,props.buttonText,\" with \",providerDisplayNames[provider]),pending===provider&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":true,className:\"align-baseline text-primary\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")),provider===lastUsed&&/*#__PURE__*/React.createElement(Badge,{variant:\"warning\",className:\"position-absolute font-weight-normal\",style:{top:\"-6px\",right:\"-6px\",opacity:0.7}},\"Last used\"));}));}export default AuthSocial;","map":{"version":3,"sources":["/Users/johnyoo/Desktop/OtterSpace/src/components/AuthSocial.js"],"names":["React","useEffect","useState","Button","Spinner","Badge","useAuth","AuthSocial","props","auth","pending","setPending","lastUsed","setLastUsed","providerDisplayNames","google","facebook","twitter","github","onSigninWithProvider","provider","console","log","signinWithProvider","then","user","localStorage","setItem","onAuth","catch","error","onError","message","finally","showLastUsed","window","getItem","providers","map","inputSize","buttonText","top","right","opacity"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Badge from \"react-bootstrap/Badge\";\nimport { useAuth } from \"./../util/auth.js\";\nimport \"./AuthSocial.scss\";\n\nfunction AuthSocial(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(null);\n  const [lastUsed, setLastUsed] = useState(null);\n\n  const providerDisplayNames = {\n    google: \"Google\",\n    facebook: \"Facebook\",\n    twitter: \"Twitter\",\n    github: \"GitHub\",\n  };\n\n  const onSigninWithProvider = (provider) => {\n    console.log('lol');\n    setPending(provider);\n    auth\n      .signinWithProvider(provider)\n      .then((user) => {\n        localStorage.setItem(\"lastUsedAuthProvider\", provider);\n        props.onAuth(user);\n      })\n      .catch((error) => {\n        props.onError(error.message);\n      })\n      .finally(() => {\n        setPending(null);\n      });\n  };\n\n  // Get value of last used auth provider\n  useEffect(() => {\n    if (props.showLastUsed) {\n      const lastUsed = window.localStorage.getItem(\"lastUsedAuthProvider\");\n      if (lastUsed) {\n        setLastUsed(lastUsed);\n      }\n    }\n  }, [props.showLastUsed]);\n\n  return (\n    <>\n      {props.providers.map((provider) => (\n        <Button\n          variant=\"light\"\n          size={props.inputSize}\n          block={true}\n          onClick={() => {\n            onSigninWithProvider(provider);\n          }}\n          className=\"position-relative\"\n          key={provider}\n        >\n          <div className=\"AuthSocial__icon\">\n            <img\n              src={`https://uploads.divjoy.com/icon-${provider}.svg`}\n              alt={providerDisplayNames[provider]}\n            ></img>\n          </div>\n\n          {pending !== provider && (\n            <span>\n              {props.buttonText} with {providerDisplayNames[provider]}\n            </span>\n          )}\n\n          {pending === provider && (\n            <Spinner\n              animation=\"border\"\n              size=\"sm\"\n              role=\"status\"\n              aria-hidden={true}\n              className=\"align-baseline text-primary\"\n            >\n              <span className=\"sr-only\">Loading...</span>\n            </Spinner>\n          )}\n\n          {provider === lastUsed && (\n            <Badge\n              variant=\"warning\"\n              className=\"position-absolute font-weight-normal\"\n              style={{\n                top: \"-6px\",\n                right: \"-6px\",\n                opacity: 0.7,\n              }}\n            >\n              Last used\n            </Badge>\n          )}\n        </Button>\n      ))}\n    </>\n  );\n}\n\nexport default AuthSocial;\n"]},"metadata":{},"sourceType":"module"}