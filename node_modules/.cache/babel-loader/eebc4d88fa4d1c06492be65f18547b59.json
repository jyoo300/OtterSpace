{"ast":null,"code":"import _slicedToArray from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Form from\"react-bootstrap/Form\";import FormField from\"./FormField\";import Button from\"react-bootstrap/Button\";import Spinner from\"react-bootstrap/Spinner\";import{useAuth}from\"./../util/auth.js\";import{useForm}from\"react-hook-form\";function AuthForm(props){var auth=useAuth();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register,errors=_useForm.errors,getValues=_useForm.getValues;var submitHandlersByType={signin:function signin(_ref){var email=_ref.email,pass=_ref.pass;return auth.signin(email,pass).then(function(user){// Call auth complete handler\nprops.onAuth(user);});},signup:function signup(_ref2){var email=_ref2.email,pass=_ref2.pass;return auth.signup(email,pass).then(function(user){// Call auth complete handler\nprops.onAuth(user);});},forgotpass:function forgotpass(_ref3){var email=_ref3.email;return auth.sendPasswordResetEmail(email).then(function(){// Show success alert message\nprops.onFormAlert({type:\"success\",message:\"Password reset email sent\"});});},changepass:function changepass(_ref4){var pass=_ref4.pass;return auth.confirmPasswordReset(pass).then(function(){// Show success alert message\nprops.onFormAlert({type:\"success\",message:\"Your password has been changed\"});});}};// Handle form submission\nvar onSubmit=function onSubmit(_ref5){var email=_ref5.email,pass=_ref5.pass;// Show pending indicator\nsetPending(true);// Call submit handler for auth type\nsubmitHandlersByType[props.type]({email:email,pass:pass}).catch(function(error){// Show error alert message\nprops.onFormAlert({type:\"error\",message:error.message});}).finally(function(){// Hide pending indicator\nsetPending(false);});};return/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit(onSubmit)},[\"signup\",\"signin\",\"forgotpass\"].includes(props.type)&&/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formEmail\"},/*#__PURE__*/React.createElement(FormField,{size:props.inputSize,name:\"email\",type:\"email\",placeholder:\"Email\",error:errors.email,inputRef:register({required:\"Please enter an email\"})})),[\"signup\",\"signin\",\"changepass\"].includes(props.type)&&/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formPassword\"},/*#__PURE__*/React.createElement(FormField,{size:props.inputSize,name:\"pass\",type:\"password\",placeholder:\"Password\",error:errors.pass,inputRef:register({required:\"Please enter a password\"})})),[\"signup\",\"changepass\"].includes(props.type)&&/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formConfirmPass\"},/*#__PURE__*/React.createElement(FormField,{size:props.inputSize,name:\"confirmPass\",type:\"password\",placeholder:\"Confirm Password\",error:errors.confirmPass,inputRef:register({required:\"Please enter your password again\",validate:function validate(value){if(value===getValues().pass){return true;}else{return\"This doesn't match your password\";}}})})),/*#__PURE__*/React.createElement(Button,{variant:\"purple\",block:true,size:props.inputSize,type:\"submit\",disabled:pending},!pending&&/*#__PURE__*/React.createElement(\"span\",null,props.typeValues.buttonText),pending&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":true,className:\"align-baseline\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\"))));}export default AuthForm;","map":{"version":3,"sources":["/Users/johnyoo/Desktop/OtterSpace/src/components/AuthForm.js"],"names":["React","useState","Form","FormField","Button","Spinner","useAuth","useForm","AuthForm","props","auth","pending","setPending","handleSubmit","register","errors","getValues","submitHandlersByType","signin","email","pass","then","user","onAuth","signup","forgotpass","sendPasswordResetEmail","onFormAlert","type","message","changepass","confirmPasswordReset","onSubmit","catch","error","finally","includes","inputSize","required","confirmPass","validate","value","typeValues","buttonText"],"mappings":"wJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,OAASC,OAAT,KAAwB,mBAAxB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CAEA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACvB,GAAMC,CAAAA,IAAI,CAAGJ,OAAO,EAApB,CADuB,cAGOL,QAAQ,CAAC,KAAD,CAHf,wCAGhBU,OAHgB,eAGPC,UAHO,4BAI+BL,OAAO,EAJtC,CAIfM,YAJe,UAIfA,YAJe,CAIDC,QAJC,UAIDA,QAJC,CAISC,MAJT,UAISA,MAJT,CAIiBC,SAJjB,UAIiBA,SAJjB,CAMvB,GAAMC,CAAAA,oBAAoB,CAAG,CAC3BC,MAAM,CAAE,qBAAqB,IAAlBC,CAAAA,KAAkB,MAAlBA,KAAkB,CAAXC,IAAW,MAAXA,IAAW,CAC3B,MAAOV,CAAAA,IAAI,CAACQ,MAAL,CAAYC,KAAZ,CAAmBC,IAAnB,EAAyBC,IAAzB,CAA8B,SAACC,IAAD,CAAU,CAC7C;AACAb,KAAK,CAACc,MAAN,CAAaD,IAAb,EACD,CAHM,CAAP,CAID,CAN0B,CAO3BE,MAAM,CAAE,sBAAqB,IAAlBL,CAAAA,KAAkB,OAAlBA,KAAkB,CAAXC,IAAW,OAAXA,IAAW,CAC3B,MAAOV,CAAAA,IAAI,CAACc,MAAL,CAAYL,KAAZ,CAAmBC,IAAnB,EAAyBC,IAAzB,CAA8B,SAACC,IAAD,CAAU,CAC7C;AACAb,KAAK,CAACc,MAAN,CAAaD,IAAb,EACD,CAHM,CAAP,CAID,CAZ0B,CAa3BG,UAAU,CAAE,0BAAe,IAAZN,CAAAA,KAAY,OAAZA,KAAY,CACzB,MAAOT,CAAAA,IAAI,CAACgB,sBAAL,CAA4BP,KAA5B,EAAmCE,IAAnC,CAAwC,UAAM,CACnD;AACAZ,KAAK,CAACkB,WAAN,CAAkB,CAChBC,IAAI,CAAE,SADU,CAEhBC,OAAO,CAAE,2BAFO,CAAlB,EAID,CANM,CAAP,CAOD,CArB0B,CAsB3BC,UAAU,CAAE,0BAAc,IAAXV,CAAAA,IAAW,OAAXA,IAAW,CACxB,MAAOV,CAAAA,IAAI,CAACqB,oBAAL,CAA0BX,IAA1B,EAAgCC,IAAhC,CAAqC,UAAM,CAChD;AACAZ,KAAK,CAACkB,WAAN,CAAkB,CAChBC,IAAI,CAAE,SADU,CAEhBC,OAAO,CAAE,gCAFO,CAAlB,EAID,CANM,CAAP,CAOD,CA9B0B,CAA7B,CAiCA;AACA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,OAAqB,IAAlBb,CAAAA,KAAkB,OAAlBA,KAAkB,CAAXC,IAAW,OAAXA,IAAW,CACpC;AACAR,UAAU,CAAC,IAAD,CAAV,CACA;AACAK,oBAAoB,CAACR,KAAK,CAACmB,IAAP,CAApB,CAAiC,CAC/BT,KAAK,CAALA,KAD+B,CAE/BC,IAAI,CAAJA,IAF+B,CAAjC,EAIGa,KAJH,CAIS,SAACC,KAAD,CAAW,CAChB;AACAzB,KAAK,CAACkB,WAAN,CAAkB,CAChBC,IAAI,CAAE,OADU,CAEhBC,OAAO,CAAEK,KAAK,CAACL,OAFC,CAAlB,EAID,CAVH,EAWGM,OAXH,CAWW,UAAM,CACb;AACAvB,UAAU,CAAC,KAAD,CAAV,CACD,CAdH,EAeD,CAnBD,CAqBA,mBACE,oBAAC,IAAD,EAAM,QAAQ,CAAEC,YAAY,CAACmB,QAAD,CAA5B,EACG,CAAC,QAAD,CAAW,QAAX,CAAqB,YAArB,EAAmCI,QAAnC,CAA4C3B,KAAK,CAACmB,IAAlD,gBACC,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,WAAtB,eACE,oBAAC,SAAD,EACE,IAAI,CAAEnB,KAAK,CAAC4B,SADd,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,WAAW,CAAC,OAJd,CAKE,KAAK,CAAEtB,MAAM,CAACI,KALhB,CAME,QAAQ,CAAEL,QAAQ,CAAC,CACjBwB,QAAQ,CAAE,uBADO,CAAD,CANpB,EADF,CAFJ,CAgBG,CAAC,QAAD,CAAW,QAAX,CAAqB,YAArB,EAAmCF,QAAnC,CAA4C3B,KAAK,CAACmB,IAAlD,gBACC,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,cAAtB,eACE,oBAAC,SAAD,EACE,IAAI,CAAEnB,KAAK,CAAC4B,SADd,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,UAHP,CAIE,WAAW,CAAC,UAJd,CAKE,KAAK,CAAEtB,MAAM,CAACK,IALhB,CAME,QAAQ,CAAEN,QAAQ,CAAC,CACjBwB,QAAQ,CAAE,yBADO,CAAD,CANpB,EADF,CAjBJ,CA+BG,CAAC,QAAD,CAAW,YAAX,EAAyBF,QAAzB,CAAkC3B,KAAK,CAACmB,IAAxC,gBACC,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,iBAAtB,eACE,oBAAC,SAAD,EACE,IAAI,CAAEnB,KAAK,CAAC4B,SADd,CAEE,IAAI,CAAC,aAFP,CAGE,IAAI,CAAC,UAHP,CAIE,WAAW,CAAC,kBAJd,CAKE,KAAK,CAAEtB,MAAM,CAACwB,WALhB,CAME,QAAQ,CAAEzB,QAAQ,CAAC,CACjBwB,QAAQ,CAAE,kCADO,CAEjBE,QAAQ,CAAE,kBAACC,KAAD,CAAW,CACnB,GAAIA,KAAK,GAAKzB,SAAS,GAAGI,IAA1B,CAAgC,CAC9B,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,kCAAP,CACD,CACF,CARgB,CAAD,CANpB,EADF,CAhCJ,cAqDE,oBAAC,MAAD,EACE,OAAO,CAAC,QADV,CAEE,KAAK,CAAE,IAFT,CAGE,IAAI,CAAEX,KAAK,CAAC4B,SAHd,CAIE,IAAI,CAAC,QAJP,CAKE,QAAQ,CAAE1B,OALZ,EAOG,CAACA,OAAD,eAAY,gCAAOF,KAAK,CAACiC,UAAN,CAAiBC,UAAxB,CAPf,CASGhC,OAAO,eACN,oBAAC,OAAD,EACE,SAAS,CAAC,QADZ,CAEE,IAAI,CAAC,IAFP,CAGE,IAAI,CAAC,QAHP,CAIE,cAAa,IAJf,CAKE,SAAS,CAAC,gBALZ,eAOE,4BAAM,SAAS,CAAC,SAAhB,eAPF,CAVJ,CArDF,CADF,CA6ED,CAED,cAAeH,CAAAA,QAAf","sourcesContent":["import React, { useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport FormField from \"./FormField\";\nimport Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport { useAuth } from \"./../util/auth.js\";\nimport { useForm } from \"react-hook-form\";\n\nfunction AuthForm(props) {\n  const auth = useAuth();\n\n  const [pending, setPending] = useState(false);\n  const { handleSubmit, register, errors, getValues } = useForm();\n\n  const submitHandlersByType = {\n    signin: ({ email, pass }) => {\n      return auth.signin(email, pass).then((user) => {\n        // Call auth complete handler\n        props.onAuth(user);\n      });\n    },\n    signup: ({ email, pass }) => {\n      return auth.signup(email, pass).then((user) => {\n        // Call auth complete handler\n        props.onAuth(user);\n      });\n    },\n    forgotpass: ({ email }) => {\n      return auth.sendPasswordResetEmail(email).then(() => {\n        // Show success alert message\n        props.onFormAlert({\n          type: \"success\",\n          message: \"Password reset email sent\",\n        });\n      });\n    },\n    changepass: ({ pass }) => {\n      return auth.confirmPasswordReset(pass).then(() => {\n        // Show success alert message\n        props.onFormAlert({\n          type: \"success\",\n          message: \"Your password has been changed\",\n        });\n      });\n    },\n  };\n\n  // Handle form submission\n  const onSubmit = ({ email, pass }) => {\n    // Show pending indicator\n    setPending(true);\n    // Call submit handler for auth type\n    submitHandlersByType[props.type]({\n      email,\n      pass,\n    })\n      .catch((error) => {\n        // Show error alert message\n        props.onFormAlert({\n          type: \"error\",\n          message: error.message,\n        });\n      })\n      .finally(() => {\n        // Hide pending indicator\n        setPending(false);\n      });\n  };\n\n  return (\n    <Form onSubmit={handleSubmit(onSubmit)}>\n      {[\"signup\", \"signin\", \"forgotpass\"].includes(props.type) && (\n        <Form.Group controlId=\"formEmail\">\n          <FormField\n            size={props.inputSize}\n            name=\"email\"\n            type=\"email\"\n            placeholder=\"Email\"\n            error={errors.email}\n            inputRef={register({\n              required: \"Please enter an email\",\n            })}\n          ></FormField>\n        </Form.Group>\n      )}\n\n      {[\"signup\", \"signin\", \"changepass\"].includes(props.type) && (\n        <Form.Group controlId=\"formPassword\">\n          <FormField\n            size={props.inputSize}\n            name=\"pass\"\n            type=\"password\"\n            placeholder=\"Password\"\n            error={errors.pass}\n            inputRef={register({\n              required: \"Please enter a password\",\n            })}\n          ></FormField>\n        </Form.Group>\n      )}\n\n      {[\"signup\", \"changepass\"].includes(props.type) && (\n        <Form.Group controlId=\"formConfirmPass\">\n          <FormField\n            size={props.inputSize}\n            name=\"confirmPass\"\n            type=\"password\"\n            placeholder=\"Confirm Password\"\n            error={errors.confirmPass}\n            inputRef={register({\n              required: \"Please enter your password again\",\n              validate: (value) => {\n                if (value === getValues().pass) {\n                  return true;\n                } else {\n                  return \"This doesn't match your password\";\n                }\n              },\n            })}\n          ></FormField>\n        </Form.Group>\n      )}\n\n      <Button\n        variant=\"purple\"\n        block={true}\n        size={props.inputSize}\n        type=\"submit\"\n        disabled={pending}\n      >\n        {!pending && <span>{props.typeValues.buttonText}</span>}\n\n        {pending && (\n          <Spinner\n            animation=\"border\"\n            size=\"sm\"\n            role=\"status\"\n            aria-hidden={true}\n            className=\"align-baseline\"\n          >\n            <span className=\"sr-only\">Loading...</span>\n          </Spinner>\n        )}\n      </Button>\n    </Form>\n  );\n}\n\nexport default AuthForm;\n"]},"metadata":{},"sourceType":"module"}