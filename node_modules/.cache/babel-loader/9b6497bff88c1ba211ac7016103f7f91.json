{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Section from\"./Section\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import Modal from\"react-bootstrap/Modal\";import Form from\"react-bootstrap/Form\";import{LinkContainer}from\"react-router-bootstrap\";import SectionHeader2 from\"./SectionHeader2\";import HomeSelector from\"./HomeSelector\";import Toast from\"react-bootstrap/Toast\";import Media from\"react-bootstrap/Media\";import Avatar from\"./Avatar\";import\"./DashboardSection.scss\";import firebase from\"./../util/firebase\";import SidebarSection from\"./SidebarSection\";import ChatSection from\"./ChatSection\";// Firebase variables\nvar db=firebase.firestore();var postsRef=db.collection(\"posts\").orderBy('datePosted');// Post Data\nvar userName=\"\";var userImage=\"\";var userClass=\"\";var userSchool=\"\";var userLinkedin=\"\";var userWebsite=\"\";var postTitle=\"\";var postDescription=\"\";var postIndustry=\"\";var chatId=\"\";var userId=\"\";var dateFormatted=\"\";var tempImage=\"\";var tempName=\"\";var tempYear=\"\";var tempSchool=\"\";var currentChatId=\"\";var currentMessage=\"\";var DashboardSection=/*#__PURE__*/function(_React$Component){_inherits(DashboardSection,_React$Component);var _super=_createSuper(DashboardSection);function DashboardSection(props){var _this;_classCallCheck(this,DashboardSection);_this=_super.call(this,props);_this.showCreate=function(){_this.setState({createPost:true});};_this.hideCreate=function(){_this.setState({createPost:false});};_this.hideCard=function(){_this.setState({isHidden:true});};_this.showChat=function(chatId,userId){_this.getChat(chatId,userId);console.log(userId);_this.setState({showChat:true,postUserId:userId});};_this.hideChat=function(){_this.setState({showChat:false});};_this.formatDate=function(){var datePosted=new Date();var months=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];dateFormatted=months[datePosted.getMonth()]+\" \"+datePosted.getDate()+\", \"+datePosted.getFullYear()+\", \"+_this.formatAMPM(datePosted);};_this.formatAMPM=function(date){var hours=date.getHours();var minutes=date.getMinutes();var ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;// the hour '0' should be '12'\nminutes=minutes<10?'0'+minutes:minutes;var strTime=hours+':'+minutes+ampm;return strTime;};_this.sendMessage=function(){db.collection(\"messages\").add({chatId:currentChatId,timeStamp:new Date(),message:currentMessage,userId:userId,image:userImage}).then(function(docRef){console.log(\"Document written with ID: \",docRef.id);}).catch(function(error){console.error(\"Error adding document: \",error);});_this.getMessages();};_this.changeTitleHandler=function(event){postTitle=event.target.value;};_this.changeDescriptionHandler=function(event){postDescription=event.target.value;};_this.changeIndustryHandler=function(event){postIndustry=event.target.value;};_this.onMessageChange=function(event){currentMessage=event.target.value;};_this.state={isHidden:false,createPost:false,showChat:false,posts:[],user:firebase.auth().currentUser,orderFilter:\"Newest to oldest\",chatImage:\"\",chatName:\"\",chatYear:\"\",chatSchool:\"\",messages:[],postUserId:\"\"};return _this;}_createClass(DashboardSection,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// firebase methods\nthis.formatDate();_context.next=3;return postsRef.get().then(function(querySnapshot){var posts=[];querySnapshot.forEach(function(doc){posts.push(doc.data());//   console.log(doc.data().datePosted.toDate().getFullYear());\n//   console.log(doc.data().datePosted.toDate().getMonth());\n//   console.log(doc.data().datePosted.toDate().getDate());\n});if(_this2.state.orderFilter===\"Newest to oldest\"){posts=posts.reverse();}_this2.setState({posts:posts});});case 3:userRef=db.collection(\"users\").doc(this.state.user.uid);userId=this.state.user.uid;_context.next=7;return userRef.get().then(function(doc){if(doc.exists){userClass=doc.data().year;userSchool=doc.data().school;userName=doc.data().name;userImage=doc.data().image;userLinkedin=doc.data().linkedin;userWebsite=doc.data().website;}else{console.log(\"No such document!\");}}).catch(function(error){console.log(\"Error getting document:\",error);});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(postTitle===\"\"||postDescription===\"\"||postIndustry===\"\")){_context2.next=5;break;}alert('Missing fields!');_context2.next=9;break;case 5:_context2.next=7;return db.collection(\"chats\").add({}).then(function(docRef){chatId=docRef.id;console.log(\"Document written with ID: \",docRef.id);}).catch(function(error){console.error(\"Error adding document: \",error);});case 7:_context2.next=9;return db.collection(\"posts\").add({body:postDescription,class:userClass,image:userImage,name:userName,tag:postIndustry,title:postTitle,university:userSchool,datePosted:new Date(),chatId:chatId,userId:userId,dateFormatted:dateFormatted,linkedin:userLinkedin,website:userWebsite}).then(function(docRef){console.log(\"Document written with ID: \",docRef.id);window.location.reload(false);}).catch(function(error){console.error(\"Error adding document: \",error);});case 9:case\"end\":return _context2.stop();}}},_callee2);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"getChat\",value:function(){var _getChat=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(chatId,userId){var userRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:userRef=db.collection(\"users\").doc(userId);currentChatId=chatId;_context3.next=4;return userRef.get().then(function(doc){if(doc.exists){tempImage=doc.data().image;tempName=doc.data().name;tempYear=doc.data().year;tempSchool=doc.data().school;}else{console.log(\"No such document!\");}}).catch(function(error){console.log(\"Error getting document:\",error);});case 4:this.setState({chatImage:tempImage,chatName:tempName,chatYear:tempYear,chatSchool:tempSchool});this.getMessages();case 6:case\"end\":return _context3.stop();}}},_callee3,this);}));function getChat(_x2,_x3){return _getChat.apply(this,arguments);}return getChat;}()},{key:\"getMessages\",value:function(){var _getMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var messagesRef,messages;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.setState({messages:[]});messagesRef=db.collection(\"messages\").where(\"chatId\",\"==\",currentChatId).orderBy(\"timeStamp\");messages=[];_context4.next=5;return messagesRef.get().then(function(querySnapshot){querySnapshot.forEach(function(doc){messages.push(doc.data());});}).catch(function(error){console.log(\"Error getting documents: \",error);});case 5:this.setState({messages:messages});case 6:case\"end\":return _context4.stop();}}},_callee4,this);}));function getMessages(){return _getMessages.apply(this,arguments);}return getMessages;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Section,{bg:this.props.bg,textColor:this.props.textColor,size:this.props.size,bgImage:this.props.bgImage,bgImageOpacity:this.props.bgImageOpacity},/*#__PURE__*/React.createElement(Container,{fluid:true,sticky:\"top\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xs:3,md:2,className:\"d-none d-sm-block\"},/*#__PURE__*/React.createElement(SidebarSection,null)),/*#__PURE__*/React.createElement(Col,{xs:6,md:7},/*#__PURE__*/React.createElement(Card,{className:\"w-100 bg-purple mb-3\",hidden:this.state.isHidden},/*#__PURE__*/React.createElement(Card.Body,{className:\"text-center\"},/*#__PURE__*/React.createElement(Card.Title,null,/*#__PURE__*/React.createElement(\"h4\",{className:\"DashboardSection__create-workspace-title\"},\"Work with other students on projects\")),/*#__PURE__*/React.createElement(Card.Text,null,/*#__PURE__*/React.createElement(\"p\",{className:\"DashboardSection__create-workspace-text\"},\"Find projects to work on with other students - filtered by industry and interests\")),/*#__PURE__*/React.createElement(LinkContainer,{to:\"/workspace/kanban\"},/*#__PURE__*/React.createElement(Button,{variant:\"light\",size:\"md\",className:\"px-4\"},/*#__PURE__*/React.createElement(\"span\",{className:\"DashboardSection__done-button\"},\"Next\"))),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"mt-2\"},/*#__PURE__*/React.createElement(LinkContainer,{to:\"#\"},/*#__PURE__*/React.createElement(Card.Link,{onClick:this.hideCard},/*#__PURE__*/React.createElement(\"span\",{className:\"DashboardSection__skip-for-now\"},\"Skip for now\")))))),/*#__PURE__*/React.createElement(SectionHeader2,{title:this.props.title,subtitle:this.props.subtitle,size:1,spaced:true,className:\"text-left\",onClick:this.showCreate}),/*#__PURE__*/React.createElement(Modal,{show:this.state.createPost,onHide:this.hideCreate},/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{xs:10,className:\"ml-4 mt-3\"},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"post_title\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"I am looking for...\",onChange:this.changeTitleHandler}))),/*#__PURE__*/React.createElement(Col,{xs:10,className:\"ml-4\"},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"post_description\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Type a description...\",as:\"textarea\",rows:4,onChange:this.changeDescriptionHandler}))),/*#__PURE__*/React.createElement(Col,{xs:10,className:\"ml-4\"},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"post_industry\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",defaultValue:\"Select an industry\",onChange:this.changeIndustryHandler},/*#__PURE__*/React.createElement(\"option\",null,\"Select an industry\"),/*#__PURE__*/React.createElement(\"option\",null,\"Web Dev\"),/*#__PURE__*/React.createElement(\"option\",null,\"Design\"),/*#__PURE__*/React.createElement(\"option\",null,\"Product Management\"))))),/*#__PURE__*/React.createElement(Form.Row,{className:\"mb-3\"},/*#__PURE__*/React.createElement(Col,{xs:12,className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{variant:\"purple\",size:\"md\",className:\"px-4 mr-4\",type:\"submit\"},/*#__PURE__*/React.createElement(\"span\",{className:\"DashboardSection__post\"},\"Post\")))))),/*#__PURE__*/React.createElement(HomeSelector,{items:this.state.posts,changeOrderFilter:this.changeOrderFilter,showChat:this.showChat}),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5 mx-auto text-center\",style:{maxWidth:\"460px\"}})),/*#__PURE__*/React.createElement(Col,{className:\"d-none d-sm-block\"},/*#__PURE__*/React.createElement(Toast,{show:this.state.showChat,onClose:this.hideChat,className:\"position-fixed\"},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(Media,{className:\"align-items-center mb-2\"},/*#__PURE__*/React.createElement(Avatar,{src:this.state.chatImage,size:\"48px\"}),/*#__PURE__*/React.createElement(Media.Body,{className:\"ml-2\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"DashboardSection__no-classname mb-0\"},this.state.chatName),/*#__PURE__*/React.createElement(\"small\",{className:\"DashboardSection__no-classname\"},this.state.chatSchool,\" | Class of \",this.state.chatYear)))),/*#__PURE__*/React.createElement(Toast.Body,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(ChatSection,{items:this.state.messages,postUserId:this.state.postUserId}),/*#__PURE__*/React.createElement(Col,{xs:12,className:\"mt-4\"},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{xs:\"8\"},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"send_text\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Type a message\",onChange:this.onMessageChange}))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{variant:\"purple\",onClick:this.sendMessage,size:\"md\"},\"Send\"))))))))))));}}]);return DashboardSection;}(React.Component);export default DashboardSection;","map":{"version":3,"sources":["/Users/johnyoo/Desktop/OtterSpace/src/components/DashboardSection.js"],"names":["React","Section","Container","Row","Col","Card","Button","Modal","Form","LinkContainer","SectionHeader2","HomeSelector","Toast","Media","Avatar","firebase","SidebarSection","ChatSection","db","firestore","postsRef","collection","orderBy","userName","userImage","userClass","userSchool","userLinkedin","userWebsite","postTitle","postDescription","postIndustry","chatId","userId","dateFormatted","tempImage","tempName","tempYear","tempSchool","currentChatId","currentMessage","DashboardSection","props","showCreate","setState","createPost","hideCreate","hideCard","isHidden","showChat","getChat","console","log","postUserId","hideChat","formatDate","datePosted","Date","months","getMonth","getDate","getFullYear","formatAMPM","date","hours","getHours","minutes","getMinutes","ampm","strTime","sendMessage","add","timeStamp","message","image","then","docRef","id","catch","error","getMessages","changeTitleHandler","event","target","value","changeDescriptionHandler","changeIndustryHandler","onMessageChange","state","posts","user","auth","currentUser","orderFilter","chatImage","chatName","chatYear","chatSchool","messages","get","querySnapshot","forEach","doc","push","data","reverse","userRef","uid","exists","year","school","name","linkedin","website","preventDefault","alert","body","class","tag","title","university","window","location","reload","messagesRef","where","bg","textColor","size","bgImage","bgImageOpacity","subtitle","handleSubmit","changeOrderFilter","maxWidth","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Section from \"./Section\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport SectionHeader2 from \"./SectionHeader2\";\nimport HomeSelector from \"./HomeSelector\";\nimport Toast from \"react-bootstrap/Toast\";\nimport Media from \"react-bootstrap/Media\";\nimport Avatar from \"./Avatar\";\nimport \"./DashboardSection.scss\";\nimport firebase from \"./../util/firebase\";\nimport SidebarSection from \"./SidebarSection\";\nimport ChatSection from \"./ChatSection\";\n\n\n// Firebase variables\nvar db = firebase.firestore();\nvar postsRef = db.collection(\"posts\").orderBy('datePosted');\n\n// Post Data\nvar userName = \"\";\nvar userImage = \"\";\nvar userClass = \"\";\nvar userSchool = \"\";\nvar userLinkedin = \"\";\nvar userWebsite = \"\";\n\nvar postTitle = \"\";\nvar postDescription = \"\";\nvar postIndustry = \"\";\nvar chatId = \"\";\nvar userId = \"\";\nvar dateFormatted = \"\";\n\nvar tempImage = \"\";\nvar tempName = \"\";\nvar tempYear = \"\";\nvar tempSchool = \"\";\n\nvar currentChatId = \"\";\nvar currentMessage = \"\";\n\nclass DashboardSection extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isHidden: false,\n            createPost: false,\n            showChat: false,\n            posts: [],\n            user: firebase.auth().currentUser,\n            orderFilter: \"Newest to oldest\",\n            chatImage: \"\",\n            chatName: \"\",\n            chatYear: \"\",\n            chatSchool: \"\",\n            messages: [],\n            postUserId: \"\",\n        };\n    };\n\n    async componentDidMount() {\n        // firebase methods\n        this.formatDate();\n        await postsRef.get().then((querySnapshot) => {\n            let posts = [];\n            querySnapshot.forEach((doc) => {\n              posts.push(doc.data());\n            //   console.log(doc.data().datePosted.toDate().getFullYear());\n            //   console.log(doc.data().datePosted.toDate().getMonth());\n            //   console.log(doc.data().datePosted.toDate().getDate());\n            });\n            if(this.state.orderFilter === \"Newest to oldest\") {\n                posts = posts.reverse();\n            }\n            this.setState({posts: posts});\n        });\n        var userRef = db.collection(\"users\").doc(this.state.user.uid);\n        userId = this.state.user.uid;\n        await userRef.get().then(function(doc) {\n            if (doc.exists) {\n                userClass = doc.data().year;\n                userSchool = doc.data().school;\n                userName = doc.data().name;\n                userImage = doc.data().image;\n                userLinkedin = doc.data().linkedin;\n                userWebsite = doc.data().website;\n            } else {\n                console.log(\"No such document!\");\n            }\n          }).catch(function(error) {\n            console.log(\"Error getting document:\", error);\n          });\n    }\n\n    showCreate = () => {\n        this.setState({\n            createPost: true,\n        });\n    };\n\n    hideCreate = () => {\n        this.setState({\n            createPost: false,\n        });\n    };\n\n    hideCard = () => {\n        this.setState({\n            isHidden: true,\n        });\n    };\n\n    showChat = (chatId, userId) => {\n        this.getChat(chatId, userId);\n        console.log(userId);\n        this.setState({\n            showChat: true,\n            postUserId: userId\n        });\n    };\n\n    hideChat = () => {\n        this.setState({\n            showChat: false,\n        });\n    };\n\n    formatDate = () => {\n        let datePosted = new Date();\n        let months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n        dateFormatted = months[datePosted.getMonth()] + \" \" + datePosted.getDate() + \", \" + datePosted.getFullYear() + \", \" + this.formatAMPM(datePosted);\n    }\n\n    formatAMPM = (date) => {\n        var hours = date.getHours();\n        var minutes = date.getMinutes();\n        var ampm = hours >= 12 ? 'pm' : 'am';\n        hours = hours % 12;\n        hours = hours ? hours : 12; // the hour '0' should be '12'\n        minutes = minutes < 10 ? '0'+minutes : minutes;\n        var strTime = hours + ':' + minutes + ampm;\n        return strTime;\n      }\n      \n    async handleSubmit(event) {\n        event.preventDefault();\n        if (postTitle === \"\" || postDescription === \"\" || postIndustry === \"\") {\n            alert('Missing fields!');\n        }\n        else {\n            await db.collection(\"chats\").add({\n            \n            }).then(function (docRef) {\n                chatId = docRef.id;\n                console.log(\"Document written with ID: \", docRef.id);\n            })\n            .catch(function (error) {\n                console.error(\"Error adding document: \", error);\n            });\n            await db.collection(\"posts\").add({\n                body: postDescription,\n                class: userClass,\n                image: userImage,\n                name: userName,\n                tag: postIndustry,\n                title: postTitle,\n                university: userSchool,\n                datePosted: new Date(),\n                chatId: chatId,\n                userId: userId,\n                dateFormatted: dateFormatted,\n                linkedin: userLinkedin,\n                website: userWebsite,\n            })\n                .then(function (docRef) {\n                    console.log(\"Document written with ID: \", docRef.id);\n                    window.location.reload(false);\n                })\n                .catch(function (error) {\n                    console.error(\"Error adding document: \", error);\n                });\n        }\n    };\n\n     sendMessage = () => {\n        db.collection(\"messages\").add({\n            chatId: currentChatId,\n            timeStamp: new Date(),\n            message: currentMessage,\n            userId: userId,\n            image: userImage\n        }).then(function (docRef) {\n            console.log(\"Document written with ID: \", docRef.id);\n        })\n        .catch(function (error) {\n            console.error(\"Error adding document: \", error);\n        });\n\n        this.getMessages();\n    };\n\n    changeTitleHandler = (event) => {\n        postTitle = event.target.value;\n    }\n\n    changeDescriptionHandler = (event) => {\n        postDescription = event.target.value;\n    }\n\n    changeIndustryHandler = (event) => {\n        postIndustry = event.target.value;\n    }\n\n    // changeOrderFilter = (event) => {\n    //     this.setState({\n    //         orderFilter: event.target.value\n    //     });\n    // }\n\n    onMessageChange = (event) => {\n        currentMessage = event.target.value;\n    }\n\n    async getChat(chatId, userId) {\n        var userRef = db.collection(\"users\").doc(userId);\n        currentChatId = chatId;\n        await userRef.get().then(function(doc) {\n            if (doc.exists) {\n                tempImage = doc.data().image;\n                tempName = doc.data().name;\n                tempYear = doc.data().year;\n                tempSchool = doc.data().school;\n            } else {\n                console.log(\"No such document!\");\n            }\n          }).catch(function(error) {\n            console.log(\"Error getting document:\", error);\n          });\n\n          this.setState({\n            chatImage: tempImage,\n            chatName: tempName,\n            chatYear: tempYear,\n            chatSchool: tempSchool,\n        });\n        this.getMessages();\n    }\n\n    async getMessages() {\n        this.setState({messages: []});\n        var messagesRef = db.collection(\"messages\").where(\"chatId\", \"==\", currentChatId).orderBy(\"timeStamp\");\n        let messages = [];\n        await messagesRef.get().then(function(querySnapshot) {\n            querySnapshot.forEach(function(doc) {\n                messages.push(doc.data());\n            });\n\n        })\n        .catch(function(error) {\n            console.log(\"Error getting documents: \", error);\n        });\n        this.setState({messages: messages});\n    }\n    \n    render() {\n        return (\n            <Section\n                bg={this.props.bg}\n                textColor={this.props.textColor}\n                size={this.props.size}\n                bgImage={this.props.bgImage}\n                bgImageOpacity={this.props.bgImageOpacity}\n            >\n                <Container fluid={true} sticky=\"top\">\n                    <Row>\n                        <Col xs={3} md={2} className=\"d-none d-sm-block\">\n                            <SidebarSection></SidebarSection>\n                        </Col>\n                        <Col xs={6} md={7}>\n                            <Card className=\"w-100 bg-purple mb-3\" hidden={this.state.isHidden}>\n                                <Card.Body className=\"text-center\">\n                                    <Card.Title>\n                                        <h4 className=\"DashboardSection__create-workspace-title\">\n                                            Work with other students on projects\n                  </h4>\n                                    </Card.Title>\n                                    <Card.Text>\n                                        <p className=\"DashboardSection__create-workspace-text\">\n                                            Find projects to work on with other students - filtered by\n                                            industry and interests\n                  </p>\n                                    </Card.Text>\n                                    <LinkContainer to=\"/workspace/kanban\">\n                                        <Button variant=\"light\" size=\"md\" className=\"px-4\">\n                                            <span className=\"DashboardSection__done-button\">Next</span>\n                                        </Button>\n                                    </LinkContainer>\n                                    <Col xs={12} className=\"mt-2\">\n                                        <LinkContainer to=\"#\">\n                                            <Card.Link onClick={this.hideCard}>\n                                                <span className=\"DashboardSection__skip-for-now\">\n                                                    Skip for now\n                      </span>\n                                            </Card.Link>\n                                        </LinkContainer>\n                                    </Col>\n                                </Card.Body>\n                            </Card>\n                            <SectionHeader2\n                                title={this.props.title}\n                                subtitle={this.props.subtitle}\n                                size={1}\n                                spaced={true}\n                                className=\"text-left\"\n                                onClick={this.showCreate}\n                            ></SectionHeader2>\n                            <Modal show={this.state.createPost} onHide={this.hideCreate}>\n                                <Form onSubmit={this.handleSubmit}>\n                                    <Form.Row>\n                                        <Col xs={10} className=\"ml-4 mt-3\">\n                                            <Form.Group controlId=\"post_title\">\n                                                <Form.Control\n                                                    type=\"text\"\n                                                    placeholder=\"I am looking for...\"\n                                                    onChange={this.changeTitleHandler}\n                                                ></Form.Control>\n                                            </Form.Group>\n                                        </Col>\n                                        <Col xs={10} className=\"ml-4\">\n                                            <Form.Group controlId=\"post_description\">\n                                                <Form.Control\n                                                    type=\"text\"\n                                                    placeholder=\"Type a description...\"\n                                                    as=\"textarea\"\n                                                    rows={4}\n                                                    onChange={this.changeDescriptionHandler}\n                                                ></Form.Control>\n                                            </Form.Group>\n                                        </Col>\n                                        <Col xs={10} className=\"ml-4\">\n                                            <Form.Group controlId=\"post_industry\">\n                                                <Form.Control\n                                                    as=\"select\"\n                                                    defaultValue=\"Select an industry\"\n                                                    onChange={this.changeIndustryHandler}\n                                                >\n                                                    <option>Select an industry</option>\n                                                    <option>Web Dev</option>\n                                                    <option>Design</option>\n                                                    <option>Product Management</option>\n                                                </Form.Control>\n                                            </Form.Group>\n                                        </Col>\n                                    </Form.Row>\n                                    <Form.Row className=\"mb-3\">\n                                        <Col xs={12} className=\"text-right\">\n                                            <Button\n                                                variant=\"purple\"\n                                                size=\"md\"\n                                                className=\"px-4 mr-4\"\n                                                type=\"submit\"\n                                            >\n                                                <span className=\"DashboardSection__post\">Post</span>\n                                            </Button>\n                                        </Col>\n                                    </Form.Row>\n                                </Form>\n                            </Modal>\n                            <HomeSelector\n                                items={this.state.posts}\n                                changeOrderFilter={this.changeOrderFilter}\n                                showChat={this.showChat}\n                            ></HomeSelector>\n                            <div\n                                className=\"mt-5 mx-auto text-center\"\n                                style={{\n                                    maxWidth: \"460px\",\n                                }}\n                            >\n                            </div>\n                        </Col>\n                        <Col className=\"d-none d-sm-block\">\n                            <Toast\n                                show={this.state.showChat}\n                                onClose={this.hideChat}\n                                className=\"position-fixed\"\n                            >\n                                <Toast.Header>\n                                    <Media className=\"align-items-center mb-2\">\n                                        <Avatar\n                                            src={this.state.chatImage}\n                                            size=\"48px\"\n                                        />\n                                        <Media.Body className=\"ml-2\">\n                                            <h6 className=\"DashboardSection__no-classname mb-0\">\n                                                {this.state.chatName}\n                    </h6>\n                                            <small className=\"DashboardSection__no-classname\">\n                                                {this.state.chatSchool} | Class of {this.state.chatYear}\n                    </small>\n                                        </Media.Body>\n                                    </Media>\n                                </Toast.Header>\n                                <Toast.Body>\n                                    <Row>\n                                        <ChatSection items={this.state.messages} postUserId={this.state.postUserId}>\n\n                                        </ChatSection>\n                                        <Col xs={12} className=\"mt-4\">\n                                            <Form>\n                                                <Form.Row>\n                                                    <Col xs=\"8\">\n                                                        <Form.Group controlId=\"send_text\">\n                                                            <Form.Control\n                                                                type=\"text\"\n                                                                placeholder=\"Type a message\"\n                                                                onChange={this.onMessageChange}\n                                                            />\n                                                        </Form.Group>\n                                                    </Col>\n                                                    <Col>\n                                                        <Button variant=\"purple\" onClick={this.sendMessage} size=\"md\">\n                                                            Send\n                                                        </Button>\n                                                    </Col>\n                                                </Form.Row>\n                                            </Form>\n                                        </Col>\n                                    </Row>\n                                </Toast.Body>\n                            </Toast>\n                        </Col>\n                    </Row>\n                </Container>\n            </Section>\n        );\n    }\n}\n\nexport default DashboardSection;\n"]},"metadata":{},"sourceType":"module"}