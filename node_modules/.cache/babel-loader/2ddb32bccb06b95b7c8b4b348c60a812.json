{"ast":null,"code":"import _slicedToArray from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Modal from\"react-bootstrap/Modal\";import FormAlert from\"./FormAlert\";import Form from\"react-bootstrap/Form\";import FormField from\"./FormField\";import Button from\"react-bootstrap/Button\";import Spinner from\"react-bootstrap/Spinner\";import AuthSocial from\"./AuthSocial\";import{useAuth}from\"./../util/auth.js\";import{useForm}from\"react-hook-form\";function ReauthModal(props){var auth=useAuth();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pending=_useState2[0],setPending=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),formAlert=_useState4[0],setFormAlert=_useState4[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var onSubmit=function onSubmit(data){var pass=data.pass;setPending(true);auth.signin(auth.user.email,pass).then(function(){// Call failed action that originally required reauth\nprops.callback();// Let parent know we're done so they can hide modal\nprops.onDone();}).catch(function(error){// Hide pending indicator\nsetPending(false);// Show error alert message\nsetFormAlert({type:\"error\",message:error.message});});};return/*#__PURE__*/React.createElement(Modal,{show:true,onHide:props.onDone},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},\"Please sign in again to complete this action\"),/*#__PURE__*/React.createElement(Modal.Body,null,formAlert&&/*#__PURE__*/React.createElement(FormAlert,{type:formAlert.type,message:formAlert.message}),props.provider===\"password\"&&/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formConfirmPass\"},/*#__PURE__*/React.createElement(FormField,{size:props.inputSize,name:\"pass\",type:\"password\",placeholder:\"Password\",error:errors.pass,inputRef:register({required:\"Please enter your password\"})})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",block:true,type:\"submit\",disabled:pending},/*#__PURE__*/React.createElement(\"span\",null,\"Submit\"),pending&&/*#__PURE__*/React.createElement(Spinner,{animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":true,className:\"ml-2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Loading...\")))),props.provider!==\"password\"&&/*#__PURE__*/React.createElement(AuthSocial,{type:\"signin\",buttonText:\"Sign in\",providers:[props.provider],showLastUsed:false,onAuth:function onAuth(){props.callback();props.onDone();},onError:function onError(message){setFormAlert({type:\"error\",message:message});}})));}export default ReauthModal;","map":{"version":3,"sources":["/Users/johnyoo/Desktop/OtterSpace/src/components/ReauthModal.js"],"names":["React","useState","Modal","FormAlert","Form","FormField","Button","Spinner","AuthSocial","useAuth","useForm","ReauthModal","props","auth","pending","setPending","formAlert","setFormAlert","register","handleSubmit","errors","onSubmit","data","pass","signin","user","email","then","callback","onDone","catch","error","type","message","provider","inputSize","required"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport FormAlert from \"./FormAlert\";\nimport Form from \"react-bootstrap/Form\";\nimport FormField from \"./FormField\";\nimport Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport AuthSocial from \"./AuthSocial\";\nimport { useAuth } from \"./../util/auth.js\";\nimport { useForm } from \"react-hook-form\";\n\nfunction ReauthModal(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(false);\n  const [formAlert, setFormAlert] = useState(null);\n\n  const { register, handleSubmit, errors } = useForm();\n\n  const onSubmit = (data) => {\n    const { pass } = data;\n    setPending(true);\n\n    auth\n      .signin(auth.user.email, pass)\n      .then(() => {\n        // Call failed action that originally required reauth\n        props.callback();\n        // Let parent know we're done so they can hide modal\n        props.onDone();\n      })\n      .catch((error) => {\n        // Hide pending indicator\n        setPending(false);\n        // Show error alert message\n        setFormAlert({\n          type: \"error\",\n          message: error.message,\n        });\n      });\n  };\n\n  return (\n    <Modal show={true} onHide={props.onDone}>\n      <Modal.Header closeButton={true}>\n        Please sign in again to complete this action\n      </Modal.Header>\n      <Modal.Body>\n        {formAlert && (\n          <FormAlert\n            type={formAlert.type}\n            message={formAlert.message}\n          ></FormAlert>\n        )}\n\n        {props.provider === \"password\" && (\n          <Form onSubmit={handleSubmit(onSubmit)}>\n            <Form.Group controlId=\"formConfirmPass\">\n              <FormField\n                size={props.inputSize}\n                name=\"pass\"\n                type=\"password\"\n                placeholder=\"Password\"\n                error={errors.pass}\n                inputRef={register({\n                  required: \"Please enter your password\",\n                })}\n              ></FormField>\n            </Form.Group>\n            <Button\n              variant=\"primary\"\n              block={true}\n              type=\"submit\"\n              disabled={pending}\n            >\n              <span>Submit</span>\n\n              {pending && (\n                <Spinner\n                  animation=\"border\"\n                  size=\"sm\"\n                  role=\"status\"\n                  aria-hidden={true}\n                  className=\"ml-2\"\n                >\n                  <span className=\"sr-only\">Loading...</span>\n                </Spinner>\n              )}\n            </Button>\n          </Form>\n        )}\n\n        {props.provider !== \"password\" && (\n          <AuthSocial\n            type=\"signin\"\n            buttonText=\"Sign in\"\n            providers={[props.provider]}\n            showLastUsed={false}\n            onAuth={() => {\n              props.callback();\n              props.onDone();\n            }}\n            onError={(message) => {\n              setFormAlert({\n                type: \"error\",\n                message: message,\n              });\n            }}\n          ></AuthSocial>\n        )}\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default ReauthModal;\n"]},"metadata":{},"sourceType":"module"}