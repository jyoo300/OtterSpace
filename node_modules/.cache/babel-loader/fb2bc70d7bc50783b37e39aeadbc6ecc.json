{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johnyoo/Desktop/OtterSpace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import FormAlert from\"./FormAlert\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Avatar3 from\"./Avatar3\";import SectionHeader from\"./SectionHeader\";import Modal from\"react-bootstrap/Modal\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import Image from\"react-bootstrap/Image\";import Section from\"./Section\";import\"./HeroSection.scss\";import{useRouter}from\"./../util/router.js\";import{useAuth}from\"./../util/auth.js\";import firebase from\"./../util/firebase\";function HeroSection(props){var auth=useAuth();var router=useRouter();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),formAlert=_useState2[0],setFormAlert=_useState2[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isOpen=_React$useState2[0],setIsOpen=_React$useState2[1];var _useState3=useState(\"https://i.ibb.co/Px4mpvn/profile-icon.png\"),_useState4=_slicedToArray(_useState3,2),profileImage=_useState4[0],setProfileImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userEmail=_useState6[0],setEmail=_useState6[1];// firebase variables\n// var user = firebase.auth().currentUser;\nvar db=firebase.firestore();// var imageRef = firebase.storage().ref();\nvar userPassword=\"\";var userInfo={name:\"\",year:\"\",school:\"\",website:\"\",linkedin:\"\",image:\"https://i.ibb.co/Px4mpvn/profile-icon.png\"};var handleAuth=function handleAuth(user){updateUser(user);router.push(\"/dashboard\");};var showModal=function showModal(){setIsOpen(true);};var hideModal=function hideModal(){setIsOpen(false);};var onFormAlert=function onFormAlert(data){setFormAlert(data);};var updatePicture=function updatePicture(){// imageRef.put(userInfo.image).then(function(snapshot) {\n// });\nsetProfileImage(userInfo.image);};var emailSubmit=function emailSubmit(event){event.preventDefault();if(userEmail!==\"\"){showModal();}};var handleSubmit=function handleSubmit(event){event.preventDefault();if(userInfo.name===\"\"||userInfo.year===\"\"||userInfo.school===\"\"){alert(\"Missing required fields\");}else{auth.signup(userEmail,userPassword).then(function(user){// Call auth complete handler\nhandleAuth(user);}).catch(function(error){// Show error alert message\nonFormAlert({type:\"error\",message:error.message});});}};var updateUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!user){_context.next=7;break;}console.log(\"User is signed in\");userRef=db.collection(\"users\").doc(user.uid);_context.next=5;return userRef.update({name:userInfo.name,image:userInfo.image,year:userInfo.year,website:userInfo.website,linkedin:userInfo.linkedin,school:userInfo.school}).then(function(docRef){console.log(\"Document updated with ID: \",docRef.id);}).catch(function(error){console.error(\"Error adding document: \",error);});case 5:_context.next=8;break;case 7:console.log(\"User is not signed in.\");case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateUser(_x){return _ref.apply(this,arguments);};}();var changeEmailHandler=function changeEmailHandler(event){setEmail(event.target.value);};var changeNameHandler=function changeNameHandler(event){userInfo.name=event.target.value;};var changePasswordHandler=function changePasswordHandler(event){userPassword=event.target.value;};var changeYearHandler=function changeYearHandler(event){userInfo.year=event.target.value;};var changeImageHandler=function changeImageHandler(event){userInfo.image=event.target.value;updatePicture();};var changeSchoolHandler=function changeSchoolHandler(event){userInfo.school=event.target.value;};var changeWebsiteHandler=function changeWebsiteHandler(event){userInfo.website=event.target.value;};var changeLinkedinHandler=function changeLinkedinHandler(event){userInfo.linkedin=event.target.value;};var homeOnClick=function homeOnClick(){router.push('/dashboard');};return/*#__PURE__*/React.createElement(Section,{bg:props.bg,textColor:props.textColor,size:props.size,bgImage:props.bgImage,bgImageOpacity:props.bgImageOpacity},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,{lg:7,className:\"text-center text-lg-left\"},/*#__PURE__*/React.createElement(SectionHeader,{title:props.title,subtitle:props.subtitle,size:1,spaced:true}),/*#__PURE__*/React.createElement(Modal,{show:isOpen,onHide:hideModal},/*#__PURE__*/React.createElement(Modal.Title,{className:\"text-center mt-4 mb-2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"HeroSection__create-profile\"},\"Create your profile\")),formAlert&&/*#__PURE__*/React.createElement(FormAlert,{type:formAlert.type,message:formAlert.message}),/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Col,{xs:10},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"user_name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Full Name (required)\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Otis Ottille...\",onChange:changeNameHandler}))),/*#__PURE__*/React.createElement(Form.Row,{className:\"ml-3\"},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"user_school\"},/*#__PURE__*/React.createElement(Form.Label,null,\"School Name (required)\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Otter Space University\",onChange:changeSchoolHandler})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"user_year\",className:\"ml-3\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Graduation Year (required)\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"2020...\",onChange:changeYearHandler}))),/*#__PURE__*/React.createElement(Col,{xs:10},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"user_password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Create a Password (required)\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Type a password...\",onChange:changePasswordHandler}))),/*#__PURE__*/React.createElement(Col,{xs:10},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"user_linkedin\"},/*#__PURE__*/React.createElement(Form.Label,null,\"LinkedIn (optional)\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"url\",placeholder:\"https://linkedin.com\",onChange:changeLinkedinHandler}))),/*#__PURE__*/React.createElement(Col,{xs:10},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"user_website\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Website (optional)\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"url\",placeholder:\"https://otterspace.com\",onChange:changeWebsiteHandler}))),/*#__PURE__*/React.createElement(Col,{className:\"text-center mt-2 mb-4\"},/*#__PURE__*/React.createElement(Button,{variant:\"purple\",size:\"md\",type:\"submit\"},/*#__PURE__*/React.createElement(\"span\",{className:\"HeroSection__form-submit\"},\"Get Started\"))))),!auth.user&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Form,{className:\"mb-5\",onSubmit:emailSubmit},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xs:\"auto\"},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter email here\",onChange:changeEmailHandler}))),/*#__PURE__*/React.createElement(Col,{xs:\"auto\"},/*#__PURE__*/React.createElement(Button,{variant:\"purple\",size:\"md px-5 ml-2\",type:\"submit\",onClick:showModal},/*#__PURE__*/React.createElement(\"span\",{className:\"HeroSection__signup\"},\"Sign Up\")))))),auth.user&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"mb-5\",xs:12},/*#__PURE__*/React.createElement(Button,{variant:\"purple\",size:\"md px-5\",onClick:homeOnClick},/*#__PURE__*/React.createElement(\"span\",{className:\"HeroSection__signup\"},\"Go to Home\")))))),/*#__PURE__*/React.createElement(Col,{className:\"offset-lg-1 mt-5 mt-lg-0\"},/*#__PURE__*/React.createElement(\"figure\",{className:\"HeroSection__image-container mx-auto\"},/*#__PURE__*/React.createElement(Image,{src:props.image,fluid:true}))))));}export default HeroSection;","map":{"version":3,"sources":["/Users/johnyoo/Desktop/OtterSpace/src/components/HeroSection.js"],"names":["React","useState","FormAlert","Container","Row","Col","Avatar3","SectionHeader","Modal","Form","Button","Image","Section","useRouter","useAuth","firebase","HeroSection","props","auth","router","formAlert","setFormAlert","isOpen","setIsOpen","profileImage","setProfileImage","userEmail","setEmail","db","firestore","userPassword","userInfo","name","year","school","website","linkedin","image","handleAuth","user","updateUser","push","showModal","hideModal","onFormAlert","data","updatePicture","emailSubmit","event","preventDefault","handleSubmit","alert","signup","then","catch","error","type","message","console","log","userRef","collection","doc","uid","update","docRef","id","changeEmailHandler","target","value","changeNameHandler","changePasswordHandler","changeYearHandler","changeImageHandler","changeSchoolHandler","changeWebsiteHandler","changeLinkedinHandler","homeOnClick","bg","textColor","size","bgImage","bgImageOpacity","title","subtitle"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport FormAlert from \"./FormAlert\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Avatar3 from \"./Avatar3\";\nimport SectionHeader from \"./SectionHeader\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Image from \"react-bootstrap/Image\";\nimport Section from \"./Section\";\nimport \"./HeroSection.scss\";\nimport { useRouter } from \"./../util/router.js\";\nimport { useAuth } from \"./../util/auth.js\";\nimport firebase from \"./../util/firebase\";\n\nfunction HeroSection(props) {\n  const auth = useAuth();\n  const router = useRouter();\n  const [formAlert, setFormAlert] = useState(null);\n  const [isOpen, setIsOpen] = React.useState(false);\n  let [profileImage, setProfileImage] = useState(\"https://i.ibb.co/Px4mpvn/profile-icon.png\");\n  let [userEmail, setEmail] = useState(\"\"); \n\n  // firebase variables\n  // var user = firebase.auth().currentUser;\n  var db = firebase.firestore();\n  // var imageRef = firebase.storage().ref();\n\n  let userPassword = \"\";\n\n  let userInfo = {\n    name: \"\",\n    year: \"\",\n    school: \"\",\n    website: \"\",\n    linkedin: \"\",\n    image: \"https://i.ibb.co/Px4mpvn/profile-icon.png\",\n  };\n\n  const handleAuth = (user) => {\n    updateUser(user);\n    router.push(\"/dashboard\");\n  };\n\n  const showModal = () => {\n    setIsOpen(true);\n  };\n\n  const hideModal = () => {\n    setIsOpen(false);\n  };\n\n  const onFormAlert = (data) => {\n    setFormAlert(data);\n  };\n\n  const updatePicture = () => {\n    // imageRef.put(userInfo.image).then(function(snapshot) {\n\n    // });\n    setProfileImage(userInfo.image);\n  };\n\n  const emailSubmit = (event) => {\n    event.preventDefault();\n    if(userEmail !== \"\") {\n      showModal();\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if(userInfo.name === \"\" || userInfo.year === \"\" || userInfo.school === \"\") {\n      alert(\"Missing required fields\");\n    }\n    else {\n      auth.signup(userEmail, userPassword).then((user) => {\n        // Call auth complete handler\n        handleAuth(user);\n      }).catch((error) => {\n        // Show error alert message\n        onFormAlert({\n          type: \"error\",\n          message: error.message,\n        });\n      });\n    }\n  };\n\n  const updateUser = async (user) => {\n    if (user) {\n      console.log(\"User is signed in\");\n      var userRef = db.collection(\"users\").doc(user.uid);\n      await userRef.update({\n          name: userInfo.name,\n          image: userInfo.image,\n          year: userInfo.year,\n          website: userInfo.website,\n          linkedin: userInfo.linkedin,\n          school: userInfo.school,\n      }).then(function(docRef) {\n        console.log(\"Document updated with ID: \", docRef.id);\n      })\n      .catch(function(error) {\n        console.error(\"Error adding document: \", error);\n      });\n    } else {\n      console.log(\"User is not signed in.\")\n    }\n  }\n\n  const changeEmailHandler = (event) => {\n    setEmail(event.target.value);\n  }\n\n  const changeNameHandler = (event) => {\n    userInfo.name = event.target.value;\n  }\n\n  const changePasswordHandler = (event) => {\n    userPassword = event.target.value;\n  }\n\n  const changeYearHandler = (event) => {\n    userInfo.year = event.target.value;\n  }\n\n  const changeImageHandler = (event) => {\n    userInfo.image = event.target.value;\n    updatePicture();\n  }\n\n  const changeSchoolHandler = (event) => {\n    userInfo.school = event.target.value;\n  }\n\n  const changeWebsiteHandler = (event) => {\n    userInfo.website = event.target.value;\n  }\n\n  const changeLinkedinHandler = (event) => {\n    userInfo.linkedin = event.target.value;\n  }\n\n  const homeOnClick = () => {\n    router.push('/dashboard');\n  }\n\n  return (\n    <Section\n      bg={props.bg}\n      textColor={props.textColor}\n      size={props.size}\n      bgImage={props.bgImage}\n      bgImageOpacity={props.bgImageOpacity}\n    >\n      <Container>\n        <Row className=\"align-items-center\">\n          <Col lg={7} className=\"text-center text-lg-left\">\n            <SectionHeader\n              title={props.title}\n              subtitle={props.subtitle}\n              size={1}\n              spaced={true}\n            ></SectionHeader>\n            <Modal show={isOpen} onHide={hideModal}>\n              <Modal.Title className=\"text-center mt-4 mb-2\">\n                <span className=\"HeroSection__create-profile\">\n                  Create your profile\n                </span>\n              </Modal.Title>\n              {formAlert && (\n                <FormAlert\n                  type={formAlert.type}\n                  message={formAlert.message}\n              ></FormAlert>\n              )}\n              {/* <Col xs={12} className=\"p-4 text-center\">\n                <Avatar3\n                  src={profileImage}\n                  alt=\"\"\n                  size=\"200px\"\n                  className=\"text-center\"\n                ></Avatar3>\n              </Col> */}\n              <Form onSubmit={handleSubmit}>\n                {/* <Col xs={10}>\n                  <Form.Group controlId=\"user_image\">\n                    <Form.Label>Image Upload</Form.Label>\n                    <Form.Control\n                      type=\"file\"\n                      onChange={changeImageHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Col> */}\n                <Col xs={10}>\n                  <Form.Group controlId=\"user_name\">\n                    <Form.Label>Full Name (required)</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Otis Ottille...\"\n                      onChange={changeNameHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Col>\n                <Form.Row className=\"ml-3\">\n                  <Form.Group controlId=\"user_school\">\n                    <Form.Label>School Name (required)</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Otter Space University\"\n                      onChange={changeSchoolHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                  <Form.Group controlId=\"user_year\" className=\"ml-3\">\n                    <Form.Label>Graduation Year (required)</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"2020...\"\n                      onChange={changeYearHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Form.Row>\n                <Col xs={10}>\n                  <Form.Group controlId=\"user_password\">\n                    <Form.Label>Create a Password (required)</Form.Label>\n                    <Form.Control\n                      type=\"password\"\n                      placeholder=\"Type a password...\"\n                      onChange={changePasswordHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Col>\n                <Col xs={10}>\n                  <Form.Group controlId=\"user_linkedin\">\n                    <Form.Label>LinkedIn (optional)</Form.Label>\n                    <Form.Control\n                      type=\"url\"\n                      placeholder=\"https://linkedin.com\"\n                      onChange={changeLinkedinHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Col>\n                <Col xs={10}>\n                  <Form.Group controlId=\"user_website\">\n                    <Form.Label>Website (optional)</Form.Label>\n                    <Form.Control\n                      type=\"url\"\n                      placeholder=\"https://otterspace.com\"\n                      onChange={changeWebsiteHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Col>\n                <Col className=\"text-center mt-2 mb-4\">\n                  <Button variant=\"purple\" size=\"md\" type=\"submit\">\n                    <span className=\"HeroSection__form-submit\">\n                      Get Started\n                    </span>\n                  </Button>\n                </Col>\n              </Form>\n            </Modal>\n            \n            {!auth.user && (\n              <>\n              <Form className=\"mb-5\" onSubmit={emailSubmit}>\n              <Row>\n                <Col xs=\"auto\">\n                  <Form.Group controlId=\"email\">\n                    <Form.Control\n                      type=\"email\"\n                      placeholder=\"Enter email here\"\n                      onChange={changeEmailHandler}\n                    ></Form.Control>\n                  </Form.Group>\n                </Col>\n                <Col xs=\"auto\">\n                  <Button\n                    variant=\"purple\"\n                    size=\"md px-5 ml-2\"\n                    type=\"submit\"\n                    onClick={showModal}\n                  >\n                    <span className=\"HeroSection__signup\">Sign Up</span>\n                  </Button>\n                </Col>\n              </Row>\n            </Form>\n              </>\n            )}\n            {auth.user && (\n              <>\n              <Row>\n                <Col className=\"mb-5\" xs={12}>\n                  <Button\n                    variant=\"purple\"\n                    size=\"md px-5\"\n                    onClick={homeOnClick}\n                  >\n                    <span className=\"HeroSection__signup\">Go to Home</span>\n                  </Button>\n                </Col>\n              </Row>\n              </>\n            )}\n          </Col>\n          <Col className=\"offset-lg-1 mt-5 mt-lg-0\">\n            <figure className=\"HeroSection__image-container mx-auto\">\n              <Image src={props.image} fluid={true}></Image>\n            </figure>\n          </Col>\n        </Row>\n      </Container>\n    </Section>\n  );\n}\n\nexport default HeroSection;\n"]},"metadata":{},"sourceType":"module"}